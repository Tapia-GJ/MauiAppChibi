<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiMySql.Views.AgregarView"
             BackgroundColor="#1e2939"
             Title="Agregar">

    <ScrollView>
        <VerticalStackLayout Padding="10">

            <!-- Encabezado -->
            <Grid  Padding="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Entry x:Name="EntryBuscar"
                       Placeholder="Buscar en Chibiquiles"
                       BackgroundColor="White"
                       TextColor="Black"
                       HeightRequest="40"
                       VerticalOptions="Center"
                       HorizontalOptions="FillAndExpand" />

                <Image Source="cart_icon.png"
                       WidthRequest="24"
                       HeightRequest="24"
                       Margin="10,0,0,0"
                       Grid.Column="1"
                       VerticalOptions="Center"/>
            </Grid>

            <!-- Título -->
            <Label Text="Inspirado en lo último que viste"
                   FontAttributes="Bold"
                   FontSize="18"
                   Margin="10,10,10,0"/>

            <!-- CollectionView -->
            <CollectionView x:Name="ProductosCollectionView"
                            Margin="0,0,0,20">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame HasShadow="True" CornerRadius="10" Margin="0,10">
                            <VerticalStackLayout>
                                <Grid ColumnDefinitions="100,*,Auto">
                                    <Image Grid.Column="0"
                   Source="{Binding ImagenPath}"
                   Aspect="AspectFill"
                   HeightRequest="100"
                   WidthRequest="100"/>

                                    <VerticalStackLayout Grid.Column="1" Padding="10,0,10,0">

                                        <Label Text="{Binding Nombre}"
                       FontAttributes="Bold"
                       FontSize="14"
                       LineBreakMode="TailTruncation" />

                                        <Label Text="{Binding Descripcion}"
                       FontSize="12"
                       TextColor="Gray"
                       LineBreakMode="TailTruncation"
                       MaxLines="2"/>

                                        <Label Text="{Binding Precio, StringFormat='$ {0:N2}'}"
                       FontAttributes="Bold"
                       FontSize="16"
                       TextColor="Black"/>

                                        <Label Text="Envío gratis ⚡ FULL"
                       FontSize="12"
                       TextColor="Green"
                       FontAttributes="Bold"/>
                                    </VerticalStackLayout>
                                </Grid>

                                <!-- ✅ Botón para agregar al carrito -->
                                <Button Text="Agregar al carrito"
                BackgroundColor="#FFCC00"
                TextColor="Black"
                CornerRadius="8"
                Margin="10,5"
                Clicked="AgregarAlCarrito_Clicked" />
                            </VerticalStackLayout>
                        </Frame>

                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
